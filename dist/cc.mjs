const ns = {};
const n=new TextDecoder("utf-16le",{fatal:!0}),p=a=>{if(a.length<=192)return String.fromCharCode(...a);try{return n.decode(a)}catch{const b=a.length,c=[];for(let d=0;d<b;d+=1024)c.push(String.fromCharCode(...a.subarray(d,d+1024)));return c.join("")}},q=(a,b,c)=>{let d=0;const f=new Uint8Array(4096);do{const {read:e,written:g}=b.o(a,c,f);c=c.slice(e);d+=g}while(c.length);return d};class r{constructor(a,b,c){this.h=b.M(a,c??{});this.g=b}decode(a){return this.g.N(this.h,a)}}
class t{constructor(a,b,c){this.u=a;this.g=b;this.h=c??{};this.S=b.m(a,this.h)}encode(a){if(!a)return new Uint8Array(0);const b=this.g;var c=b.L(b.m(this.u,this.h),b,a);c=new Uint8Array(c);({written:a}=b.o(this.S,a,c));return c.subarray(0,a)}encodeInto(a,b){return this.g.o(this.S,a,b)}byteLength(a){const b=this.g;return b.K(b.m(this.u,this.h),b,a)}}
class u{constructor(a,b,c){this.g=a;this.D=b;this.G=c}getName(){return this.g.j}decode(a,b){b=this.newDecoder(b);return b.decode(a)+b.decode()}encode(a,b){return this.newEncoder(b).encode(a)}newDecoder(a){return new r(this.g,this.D,a)}newEncoder(a){return new t(this.g,this.G,a)}};const v=a=>a.toLowerCase().replace(/[^a-z0-9]/gu,"").replace(/(?<!\d)0+/gu,"");
class w{constructor(a,b){a??={};this.g=new Map;this.cache=new Map;b=(b??"").split(",").map(c=>c.split(" ").map(v));for(const c of Object.keys(a)){const d=a[c];if(d?.create){const f=v(c);this.g.set(f,d);b.filter(e=>e.includes(f)).forEach(e=>e.forEach(g=>this.g.set(g,d)))}}}decode(a,b,c){return this.getEncoding(b,c).decode(a,c)}encode(a,b,c){return this.getEncoding(b,c).encode(a,c)}getEncoding(a,b){a=v(a);const c=a+(b?.overrides??"");var d=this.cache.get(c);if(!d){d=this.g.get(a);if(!d)throw Error(`Encoding "${a}" not supported`);
d=d.create(b);this.cache.set(c,d)}return d}};const x=(a,b)=>a.C.decode(b,{stream:!!b}),y=(a,b)=>{var c=a.B;if(!a.l){var d=(new Uint16Array(65536)).fill(65533);for(let f=0;f<c.length;f++){const e=c[f];e!==65533&&(d[e]=f)}a.l=d}a=a.l;b=b.defaultCharByte;c=63;d=null;typeof b==="string"?b.length&&(c=b.charCodeAt(0)):typeof b==="function"&&(d=b);return{l:a,F:c,H:d}},A={M:(a,b)=>{const c=a.j,d=a.B,f=a.Y,e=b.defaultCharUnicode;let g=65533,k=null,h=null;(a=a.W&&(b?.native??!1))?h=new TextDecoder(c):typeof e==="string"?e.length&&(g=e.charCodeAt(0)):
typeof e==="function"&&(k=e);return{B:d,F:g,H:k,T:a?x:f,C:h,v:-1}},N:(a,b)=>{const c=a.T;return c(a,b)}},B=(a,b,c,d)=>{try{new TextDecoder(a);var f=!0}catch{f=!1}return new u({j:a,W:f,B:b,l:null,Y:c},A,d)};const C=(a,b,c,d)=>{a=a.charCodeAt(b);c[d]=a;c[d+1]=a>>8;return 0},D=(a,b,c,d)=>{a=a.charCodeAt(b);c[d]=a>>8;c[d+1]=a;return 0},E=(a,b,c,d)=>{a=a.codePointAt(b);c[d]=a;c[d+1]=a>>8;c[d+2]=a>>16;c[d+3]=a>>24;return a>65535?1:0},F=(a,b,c,d)=>{a=a.codePointAt(b);c[d]=a>>24;c[d+1]=a>>16;c[d+2]=a>>8;c[d+3]=a;return a>65535?1:0},G=(a,b)=>(a[b]|a[b+1]<<8|a[b+2]<<16|a[b+3]<<24)>>>0,H=(a,b)=>(a[b]<<24|a[b+1]<<16|a[b+2]<<8|a[b+3])>>>0,I=(a,b,c)=>{if(c<=65535)return a[b]=c,a[b+1]=c>>8,2;if(c>1114111)return a[b]=
65533,a[b+1]=255,2;c-=65536;const d=55296|c>>10;c=56320|c&1023;a[b]=d;a[b+1]=d>>8;a[b+2]=c;a[b+3]=c>>8;return 4},J=(a,b,c)=>(a.R?a.O:0)+c.length*a.O,K={m:(a,b)=>{const c=a.J;a=a.P;b=b.addBOM??!1;return{R:b,A:b,O:1<<c+1,put:c?a?F:E:a?D:C}},o:(a,b,c)=>{const d=a.O,f=a.put;let e=0;if(a.A){if(c.length<d)return{read:0,written:0};f("ï»¿",0,c,e);e+=d;a.A=!1}a=Math.min(b.length,c.length-e&~(d-1));for(let g=0;g<a;g++,e+=d)g+=f(b,g,c,e);return{read:a,written:e}},L:J,K:(a,b,c)=>a.O===4?q(a,b,c):J(a,b,c)},L=[{J:16,
D:{M:(a,b)=>({C:new TextDecoder("UTF-16"+["LE","BE"][a.P],{ignoreBOM:!(b.stripBOM??!0)})}),N:(a,b)=>a.C.decode(b,{stream:!!b})},G:K},{J:32,D:{M:(a,b)=>({v:new Uint8Array(4),i:0,V:a.P?H:G,X:!(b.stripBOM??!0)}),N:(a,b)=>{const c=a.v,d=a.V,f=a.X;if(!b)return a.i?(a.i=0,String.fromCharCode(65533)):"";const e=new Uint8Array(b.length+4);let g=0,k=0;if(a.i){for(;a.i<4&&g<b.length;)c[a.i++]=b[g++];if(a.i<4)return"";k+=I(e,k,d(c,0))}const h=b.length-3;for(;g<h;g+=4)k+=I(e,k,d(b,g));a.i=b.length-g;a.i&&c.set(b.subarray(g));
return(new TextDecoder("UTF-16",{ignoreBOM:f})).decode(e.subarray(0,k))}},G:K},{J:8,D:{M:(a,b)=>({C:new TextDecoder("UTF-8",{ignoreBOM:!(b.stripBOM??!0)})}),N:(a,b)=>a.C.decode(b,{stream:!!b})},G:{m:(a,b)=>{a=b.addBOM??!1;return{R:a,A:a,U:new TextEncoder,I:""}},o:(a,b,c)=>{let d=0;if(a.A){if(c.length<3)return{read:0,written:0};c[0]=239;c[1]=187;c[2]=191;d+=3;a.A=!1}a.I&&(b=a.I+b,a.I="");const f=b.length-1;if(b.length>0){const k=b.charCodeAt(f);k>=55296&&k<56320&&(a.I=b.charAt(f),b=b.slice(0,f))}const {read:e,
written:g}=a.U.encodeInto(b,c.subarray(d));return{read:e+(a.I?1:0),written:g+d}},L:(a,b,c)=>(a.R?4:0)+c.length*4,K:q}}];class M{constructor(a,b){const c=L[a];this.g=new u({j:"UTF-"+c.J+["LE","BE",""][b],J:a,P:b},c.D,c.G)}create(){return this.g}};const N=(a,b)=>{if(!b)return"";const c=a.B,d=a.F;a=a.H;const f=b.length,e=new Uint16Array(f);for(let g=0;g<f;g++){const k=b[g],h=c[k];e[g]=h!==65533?h:a?.(k,g)??d}return p(e)},O=(a,b,c)=>c.length,P={m:y,o:(a,b,c)=>{const d=a.l,f=a.F;a=a.H;const e=Math.min(b.length,c.length);for(let g=0;g<e;g++){const k=b.charCodeAt(g),h=d[k];c[g]=h!==65533?h:a?.(k,g)??f}return{read:e,written:e}},L:O,K:O};
class Q{constructor(a,b,c){this.j=a;this.h=b;this.u=c??""}create(a){return B(this.j,this.g(a),N,P)}g(a){var b=this.h,c=this.u;const d=(new Uint16Array(256)).fill(65533);for(var f=0;f<256-b.length;)d[f]=f++;let e=0;for(;f<256;)d[f++]=b.charCodeAt(e++);for(b=0;b<c.length;)d[c.charCodeAt(b)]=c.charCodeAt(b+1),b+=2;for(c=128;c<256;)b=d[c],b===32&&(d[c]=c),b===63&&(d[c]=65533),c++;a=a?.overrides??[];for(c=0;c<a.length-1;)b=a[c++],f=a[c++],d[Number(b)]=typeof f==="number"?f:f.charCodeAt(0);return d}};const R=(a,b)=>{const c=a.B,d=a.F,f=a.H;var e=a.v;if(!b)return a.v=-1,e===-1?"":String.fromCharCode(f?.(e,-1)??d);const g=b.length;if(g===0)return"";const k=new Uint16Array(g+1);let h=0,m=0;e===-1?e=b[0]:h=a.v=-1;for(;;){let l=c[e];if(l!==65533)k[m++]=l;else if(h+1<g)l=c[e<<8|b[h+1]],l!==65533?h++:l=f?.(l,h)??d,k[m++]=l;else{a.v=e;break}h++;if(h<g)e=b[h];else break}return p(k.subarray(0,m))},S={m:y,o:(a,b,c)=>{const d=a.l,f=a.F;a=a.H;let e=0,g=0;const k=b.length,h=c.length,m=h-1;for(;e<k;e++){var l=
b.charCodeAt(e);const z=d[l];l=z!==65533?z:a?.(l,e)??f;if(l>255){if(g>=m)break;c[g]=l>>8;c[g+1]=l;g+=2}else{if(g>=h)break;c[g]=l;g+=1}}return{read:e,written:g}},L:(a,b,c)=>c.length*2,K:q};
class T{constructor(a,b,c){this.j=a;this.h=b;this.u=c}create(){return B(this.j,this.g(),R,S)}g(){const a=(new Uint16Array(65536)).fill(65533);var b=this.h,c=this.u;for(var d=0;d<c.length;d++){const e=c[d];let g=Number.parseInt(e[0],16);var f=-1;for(let k=1;k<e.length;k++){const h=e[k];if(typeof h==="string"){for(f=0;f<h.length;f++)a[g++]=h.charCodeAt(f);f=h.charCodeAt(h.length-1)}if(typeof h==="number")for(let m=0;m<h;m++)a[g++]=f+1,f++}}if(b)for(b=b.g(),c=0;c<b.length;c++)d=b[c],d===65533||a[c]===
65533&&(a[c]=d);return a}};ns.Z=T;ns.canonicalize=v;ns.createIconv=(a,b)=>new w(a,b);ns.SBCS=Q;ns.Unicode=M;
export const { canonicalize, createIconv } = ns;
const { DBCS, SBCS, Unicode } = ns;

